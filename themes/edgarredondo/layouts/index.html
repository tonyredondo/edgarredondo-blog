{{ define "main" }}
{{ $paginator := .Paginate (where .Site.RegularPages.ByDate.Reverse "Section" "posts") }}
{{ range $paginator.Pages }}
{{- $classes := slice "post" "type-post" "status-publish" "format-standard" "hentry" -}}
{{- if .Params.featured_image }}{{ $classes = $classes | append "has-post-thumbnail" }}{{ end -}}
{{- range .Params.category }}{{ $classes = $classes | append (printf "category-%s" (urlize .)) }}{{ end -}}
{{- range .Params.tag }}{{ $classes = $classes | append (printf "tag-%s" (urlize .)) }}{{ end -}}
<article class="{{ delimit $classes " " }}">
    <header class="entry-header">
        <h2 class="entry-title" itemprop="headline">
            <a href="{{ .RelPermalink }}" rel="bookmark">{{ .Title }}</a>
        </h2>
        <div class="entry-meta">
            <span class="byline" itemprop="author" itemscope itemtype="https://schema.org/Person">
                BY <span class="authors vcard"><span class="url fn n">Edgar Redondo</span></span>
            </span>
            <span class="posted-on">
                <a href="{{ .RelPermalink }}" rel="bookmark">
                    <time class="entry-date published updated" datetime="{{ .Date.Format "2006-01-02" }}">
                        {{ .Date.Day }} {{ index (slice "enero" "febrero" "marzo" "abril" "mayo" "junio" "julio" "agosto" "septiembre" "octubre" "noviembre" "diciembre") (sub .Date.Month 1) }}, {{ .Date.Year }}
                    </time>
                </a>
            </span>
        </div>
    </header>
    
    {{ if .Params.featured_image }}
    <a class="post-thumbnail" href="{{ .RelPermalink }}">
        <img alt="{{ .Title }}" src="{{ strings.TrimPrefix "/" .Params.featured_image | relURL }}" class="attachment-rara-academic-with-sidebar size-rara-academic-with-sidebar wp-post-image" />
    </a>
    {{ end }}
    
    <div class="entry-content" itemprop="text">
        {{ if .Params.description }}
        <p>{{ .Params.description | safeHTML }}</p>
        {{ else }}
        {{ .Summary }}
        {{ end }}
    </div>
    
    <div class="entry-footer">
        <a href="{{ .RelPermalink }}" class="read-more">Read More</a>
    </div>
</article>
{{ end }}

{{ if gt $paginator.TotalPages 1 }}
<nav class="pagination">
    {{ if $paginator.HasPrev }}
    <a href="{{ $paginator.Prev.URL }}" class="prev">« Anterior</a>
    {{ end }}
    {{ if $paginator.HasNext }}
    <a href="{{ $paginator.Next.URL }}" class="next">Siguiente »</a>
    {{ end }}
</nav>
{{ end }}
{{ end }}
